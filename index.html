<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Diagrama Interactivo de Estructuras Cerebrales</title>
  <style>
    /* Estilos generales */
    body {
      margin: 0;
      overflow: hidden;
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
    }
    #diagram-container {
      width: 100vw;
      height: 100vh;
      position: relative;
    }
    svg {
      width: 100%;
      height: 100%;
    }
    /* Estilos para las estructuras y etiquetas */
    .structure {
      stroke: #333;
      stroke-width: 1;
      fill: #ddd;
    }
    .label {
      font-size: 12px;
      fill: #000;
      pointer-events: none;
    }
    /* Flechas de conexiones */
    .arrow-sensorial {
      stroke: red;
      stroke-width: 2;
      fill: none;
      marker-end: url(#arrowhead-red);
    }
    .arrow-motor {
      stroke: blue;
      stroke-width: 2;
      fill: none;
      marker-end: url(#arrowhead-blue);
    }
    .arrow-modulator {
      stroke: green;
      stroke-width: 2;
      fill: none;
      marker-end: url(#arrowhead-green);
    }
  </style>
</head>
<body>
  <div id="diagram-container">
    <!-- El SVG se insertará aquí -->
    <svg id="brainDiagram" viewBox="0 0 1200 1000">
      <!-- Se definirán los marcadores para las flechas en la parte de definiciones -->
      <defs>
        <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" fill="red" />
        </marker>
        <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" fill="blue" />
        </marker>
        <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" fill="green" />
        </marker>
      </defs>
            <!-- Grupo principal para habilitar el pan y zoom -->
      <g id="zoomGroup">
        <!-- Sección: Tálamo y subdivisiones -->
        <g id="thalamus" class="structure-group">
          <!-- Representación global del Tálamo -->
          <ellipse cx="600" cy="400" rx="80" ry="60" class="structure" fill="#e0f7fa" />
          <text x="580" y="405" class="label">Tálamo</text>
          <!-- Subdivisiones: Sensitivos -->
          <g id="thalamus-sensory">
            <rect x="520" y="340" width="30" height="20" fill="#ffe0b2" stroke="#333" />
            <text x="525" y="355" class="label" font-size="10">VPL</text>
            <rect x="650" y="340" width="30" height="20" fill="#ffe0b2" stroke="#333" />
            <text x="655" y="355" class="label" font-size="10">VPM</text>
          </g>
          <!-- Subdivisiones: Asociativos -->
          <g id="thalamus-associative">
            <rect x="580" y="470" width="40" height="20" fill="#c8e6c9" stroke="#333" />
            <text x="585" y="485" class="label" font-size="10">DM</text>
            <rect x="640" y="470" width="40" height="20" fill="#c8e6c9" stroke="#333" />
            <text x="645" y="485" class="label" font-size="10">Pulvinar</text>
          </g>
          <!-- Subdivisiones: Motor -->
          <g id="thalamus-motor">
            <rect x="560" y="290" width="40" height="20" fill="#bbdefb" stroke="#333" />
            <text x="565" y="305" class="label" font-size="10">VA</text>
            <rect x="620" y="290" width="40" height="20" fill="#bbdefb" stroke="#333" />
            <text x="625" y="305" class="label" font-size="10">VL</text>
          </g>
        </g>

        <!-- Sección: Commissuras y cuerpos interconectores -->
        <g id="commissures">
          <!-- Fornix -->
          <path d="M400,500 C420,480 480,480 500,500" class="structure" fill="none" stroke="#8d6e63" stroke-width="4"/>
          <text x="430" y="490" class="label">Fornix</text>
          <!-- Cuerpo Calloso -->
          <rect x="100" y="100" width="300" height="50" class="structure" fill="#d1c4e9" />
          <text x="230" y="130" class="label">Cuerpo Calloso</text>
          <!-- Núcleos Geniculados -->
          <circle cx="800" cy="200" r="20" class="structure" fill="#ffccbc" />
          <text x="785" y="205" class="label" font-size="10">Gen. Lat.</text>
          <circle cx="850" cy="200" r="20" class="structure" fill="#ffccbc" />
          <text x="835" y="205" class="label" font-size="10">Gen. Med.</text>
        </g>

        <!-- Sección: Otras estructuras específicas -->
        <g id="other-structures">
          <!-- Núcleo Subtalámico -->
          <circle cx="600" cy="300" r="15" class="structure" fill="#f8bbd0" />
          <text x="590" y="305" class="label" font-size="10">Subtalámico</text>
          <!-- Epífisis -->
          <rect x="700" y="600" width="30" height="30" class="structure" fill="#d7ccc8" />
          <text x="705" y="620" class="label" font-size="10">Epífisis</text>
          <!-- Insula -->
          <path d="M300,500 Q320,480 340,500 Q320,520 300,500" class="structure" fill="#c5e1a5" stroke="#333" stroke-width="1"/>
          <text x="310" y="495" class="label" font-size="10">Insula</text>
        </g>

        <!-- Sección: Núcleo Basalis y Núcleos Septales -->
        <g id="basal-forebrain">
          <!-- Núcleo Basalis de Meynert -->
          <ellipse cx="900" cy="500" rx="25" ry="15" class="structure" fill="#f0f4c3" />
          <text x="885" y="505" class="label" font-size="10">Meynert</text>
          <!-- Núcleos Septales -->
          <ellipse cx="950" cy="550" rx="20" ry="10" class="structure" fill="#e1bee7" />
          <text x="940" y="555" class="label" font-size="10">Septal</text>
        </g>

        <!-- Sección: Áreas Corticales: Primarias y Asociativas -->
        <g id="cortical-areas">
          <!-- Área Motora Primaria (Brodmann 4) -->
          <rect x="1000" y="400" width="80" height="60" class="structure" fill="#fff9c4" />
          <text x="1010" y="430" class="label" font-size="10">M. Primaria (B4)</text>
          <!-- Área Somatosensorial Primaria (B3,1,2) -->
          <rect x="1000" y="500" width="80" height="60" class="structure" fill="#e1f5fe" />
          <text x="1010" y="530" class="label" font-size="10">S. Primaria (B3,1,2)</text>
          <!-- Área Visual Primaria (Brodmann 17) -->
          <rect x="1000" y="600" width="80" height="60" class="structure" fill="#fce4ec" />
          <text x="1010" y="630" class="label" font-size="10">V. Primaria (B17)</text>
          <!-- Área Auditiva Primaria (B41/42) -->
          <rect x="1000" y="700" width="80" height="60" class="structure" fill="#f3e5f5" />
          <text x="1010" y="730" class="label" font-size="10">A. Primaria (B41/42)</text>
          <!-- Áreas Asociativas: Prefrontal, Temporoparietooccipital, y Áreas Límbicas -->
          <rect x="50" y="600" width="100" height="80" class="structure" fill="#dcedc8" />
          <text x="60" y="640" class="label" font-size="10">Prefrontal (B9,10,46)</text>
          <rect x="50" y="700" width="100" height="80" class="structure" fill="#ffecb3" />
          <text x="60" y="740" class="label" font-size="10">Temporoparietooccipital</text>
          <rect x="50" y="800" width="100" height="80" class="structure" fill="#d7ccc8" />
          <text x="60" y="840" class="label" font-size="10">Áreas Límbicas</text>
        </g>

        <!-- Sección: Conexiones entre estructuras con flechas -->
        <g id="connections">
          <!-- Conexión sensorial: Desde VPL (x=535,y=350) hacia S. Primaria -->
          <line x1="535" y1="350" x2="1000" y2="530" class="arrow-sensorial" />
          <!-- Conexión motora: Desde M. Primaria (x≈1080,y=430) hacia Subtalámico -->
          <line x1="1080" y1="430" x2="600" y2="300" class="arrow-motor" />
          <!-- Conexión moduladora: Desde Insula (x=320,y=500) hacia Prefrontal -->
          <line x1="320" y1="500" x2="150" y2="640" class="arrow-modulator" />
          <!-- Conexión adicional: Desde Fornix hacia Áreas Límbicas -->
          <line x1="450" y1="500" x2="100" y2="840" class="arrow-modulator" />
        </g>
      </g>
    </svg>
  </div>
    <!-- Importar la librería D3 para zoom y pan -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script>
    // Selecciona el elemento SVG y el grupo que contiene todo el diagrama.
    const svg = d3.select("#brainDiagram");
    const zoomGroup = d3.select("#zoomGroup");

    // Configura el comportamiento de zoom (con escalas de 0.5 a 10 veces)
    const zoom = d3.zoom()
      .scaleExtent([0.5, 10])
      .on("zoom", (event) => {
        zoomGroup.attr("transform", event.transform);
      });

    // Aplica el zoom al elemento SVG
    svg.call(zoom);
  </script>
</body>
</html>
